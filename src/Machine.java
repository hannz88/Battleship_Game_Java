import java.util.Locale;
import java.util.Random;
import java.util.concurrent.TimeUnit;

public class Machine extends Participant {
    private static final String upperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    private static final String lowerCase = upperCase.toLowerCase(Locale.ROOT);
    private static final String num = "0123456789";
    private static final String alphaNum = upperCase + lowerCase + num;
    private static Random rand = new Random();
    private static final String ansiYellow = "\u001B[33m";
    private int prevX;
    private int prevY;

    public Machine(String avoidString, int boardLength) {
        // constructor
        super(boardLength);
        String symbol = generateSymbol(avoidString);
        this.setSymbol(symbol);
    }

    public String generateSymbol(String avoidString) {
        // generate a random symbol
        while (true) {
            char tmp = alphaNum.charAt(rand.nextInt(alphaNum.length()));
            String symbol = String.valueOf(tmp);
            if (!symbol.equals(avoidString)) {
                return this.ansiYellow + symbol + this.ansiReset;
            }
        }
    }

    public String generateAlignment() {
        // generate v or h
        int tmp = rand.nextInt(100);
        if (tmp <= 50) {
            return "v";
        }
        return "h";
    }

    public int generateX() {
        // generate the row coord of move
        return rand.nextInt(boardLength);
    }

    public int generateY() {
        // generate the col coord of move
        return rand.nextInt(boardLength);
    }

    public int[] generateMove() {
        int[] ans = new int[2];
        ans[0] = generateX();
        ans[1] = generateY();
        return ans;
    }

    public void setXY(int x, int y) {
        this.prevX = x;
        this.prevY = y;
    }

    public void won() {
        String agentSmith = "" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::7::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::~:::::::::::::::::::::::::::+::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::~7::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::7:::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                ":::::::=::::::::::::::::::I:::::::::::::::::::::::::+::::::::::::::::::~::::::::\n" +
                ":::::::::I::::::::::::::::I:::::::::::::::::::::::::7::::::::::::::::7::::::::::\n" +
                "::::::::::=I~:::::::::::::~7::::::::::::::::::::::::7::::::::::::::I?:::::::::::\n" +
                "::::::::::::?7?::::::::::::7:::::::::::::::::::::::??::::::::::::7I~::::::::::::\n" +
                ":::::::::::::=+77::::::::::I::::::::::II7::::::::::+::::::::::~7II::::::::::::::\n" +
                ":::::::::::::::??77::::::::I7:::::::?I~~=77::::::::7::::::::77II::::::::::::::::\n" +
                ":::::::::::::::::++77::::::I7::::::II~~~==+7::::::?7:::::~77III:::::::::::::::::\n" +
                "::::::::::::::::::?+?777::::7:::::I+~~~.:===7?::::?7:::,77III:::::::::::::::::::\n" +
                "::::::::::::::::::::+?+777::I7:::I~~~:,,,:~==7::::?+:I77IIII::::::::::::::::::::\n" +
                ":::::::::::::::::::::??+?777I7???~~~~,,,,,,~==777?7777IIII::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::+?++777I??~::,,,,,,,.:=777777IIII+:::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::+?+?+7777:.,,,,,,,,,.:7777IIIII:::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::~+?++?+I77+:,,,,,,,,:777IIIIII::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::?=~???+++++777::,:,,:777IIIIII777:7:::::::::::::::::::::::\n" +
                "::::::::::::::::::::::???????++++?+7,,,,,,,77IIIIII777777:::::::::::::::::::::::\n" +
                "::::::::::::::::::::::=??????I+++?+?I~,,,,:?IIIII7777777?:::::::::::::::::::::::\n" +
                "::::::::::::::::::::::=++????III+++++,~,:,7IIII7777777I??:::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::~=.?:.+III?++?7,,,~IIII7777~,7II?::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::,?~,?~~.II++?7,+III77=:.7,:77I~::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::II=:=+~=,~~=?++III~~,+=?I~?77::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::?+++I.,=~~~:??I:,+==,.I???77::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::??++I+.,IIII??IIIII:.I7??77I::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::???.~I+.IIII???IIII..77,~I7:::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::::?:,??~.:III???IIII..77.,I?:::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::::I:,I?~.,III..,III:.=77,,I::::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::::::=??~.:,~.=~:~+::.+77?::::::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::::::::I?:,,.==::=.:::+77:::::::::::::::::::::::::::::::\n" +
                ":::::::::::::::::::::::::::::::~I:::.=:::=.:::I7::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::~~:::~:::=::::=:::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n" +
                "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::";
        String[] smith = agentSmith.split("\\r?\\n");
        try {
            for (String line : smith) {
                System.out.println(line);
                TimeUnit.MILLISECONDS.sleep(50);
            }
        } catch (InterruptedException e) {
            System.out.println(e.getMessage());
        }
    }

}
